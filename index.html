<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>EmiBonnie Memories - Ultimate</title>
    <style>
        :root { 
            --emi: #f37021; --bonnie: #662d91; 
            --grad: linear-gradient(135deg, #f37021, #662d91);
            --glass: rgba(255, 255, 255, 0.8);
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            font-family: -apple-system, "Noto Sans TC", sans-serif;
            background: #fdfdfd; overflow-x: hidden;
        }

        /* ğŸ¦‹ è´è¶èƒŒæ™¯å‹•ç•« */
        .butterfly-bg { position: fixed; inset: 0; z-index: -1; pointer-events: none; overflow: hidden; }
        .fly-bf { position: absolute; opacity: 0.25; filter: blur(4px); animation: float 20s infinite ease-in-out; width: 100px; }
        @keyframes float {
            0%, 100% { transform: translate(0,0) rotate(0deg); }
            33% { transform: translate(50px, -80px) rotate(15deg); }
            66% { transform: translate(-30px, 40px) rotate(-10deg); }
        }

        /* ğŸ  é¦–é æ¨£å¼ */
        .hero { text-align: center; padding: 80px 20px 40px; }
        .eb-logo { font-size: 5rem; font-weight: 900; background: var(--grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0; }
        .counters { display: flex; justify-content: center; gap: 40px; margin-top: 30px; }
        .c-num { font-size: 2.2rem; font-weight: 800; color: #333; display: block; }
        .c-lab { font-size: 0.75rem; color: #999; font-weight: bold; }

        /* ğŸ§­ è† å›Šå°èˆªæ¬„ */
        .nav-container { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 1000; }
        .main-nav { background: var(--glass); backdrop-filter: blur(15px); padding: 10px 20px; border-radius: 50px; display: flex; gap: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid #eee; align-items: center; }
        .nav-avatar { width: 35px; height: 35px; border-radius: 50%; object-fit: cover; border: 2px solid #fff; }
        .nav-btn { border: none; background: #f0f0f0; padding: 8px 16px; border-radius: 20px; font-weight: 600; color: #555; cursor: pointer; transition: 0.3s; }
        .nav-btn.active { background: var(--grad); color: #fff; }

        /* ğŸ–¼ï¸ æ¨¡æ…‹è¦–çª—é€šç”¨æ¨£å¼ */
        .modal { position: fixed; inset: 0; background: #fff; z-index: 2000; transform: translateY(100%); transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); overflow-y: auto; }
        .modal.active { transform: translateY(0); }
        .close-btn { position: sticky; top: 20px; left: 90%; font-size: 24px; cursor: pointer; z-index: 10; color: #ccc; }

        /* ğŸ¬ ä½œå“é›† & æ—¥æ›†å¡ç‰‡ */
        .card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; padding: 20px; }
        .item-card { background: #fff; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border: 1px solid #eee; }
        .item-img { width: 100%; aspect-ratio: 16/9; object-fit: cover; background: #f9f9f9; }
        .item-info { padding: 15px; }

        /* âš™ï¸ è¨­å®šé é¢è¡¨å–® */
        .admin-sec { background: #f9f9f9; padding: 20px; border-radius: 15px; margin-bottom: 20px; border: 1px solid #eee; }
        input, select { width: 100%; padding: 10px; margin: 8px 0; border-radius: 8px; border: 1px solid #ddd; }
        .save-btn { background: var(--grad); color: white; border: none; width: 100%; padding: 12px; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        
        /* ğŸ“… æ—¥æ›†æ ¼å­ */
        .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); border-top: 1px solid #eee; }
        .cal-cell { min-height: 100px; border-right: 1px solid #eee; border-bottom: 1px solid #eee; padding: 5px; }
        .event-tag { font-size: 0.7rem; padding: 3px; border-radius: 4px; margin-bottom: 2px; border-left: 3px solid var(--emi); background: #fff5ed; }
    </style>
</head>
<body>

<div class="butterfly-bg">
    <img src="https://api.typedream.com/v0/document/public/ac92594a-86c2-466d-b3b0-f0907e5f3088_æ“·å–_PNG.png" class="fly-bf" style="top:10%; left:5%;">
    <img src="https://api.typedream.com/v0/document/public/ac92594a-86c2-466d-b3b0-f0907e5f3088_æ“·å–_PNG.png" class="fly-bf" style="top:50%; right:5%; filter:hue-rotate(260deg) blur(6px); animation-delay: -5s;">
</div>

<div class="hero">
    <h1 class="eb-logo">EB</h1>
    <div style="letter-spacing: 5px; color: #aaa; font-size: 0.8rem;">BUTTERFLY MEMORIES</div>
    <div class="counters">
        <div class="c-item"><span class="c-num" id="d-born">0</span><span class="c-lab">è´è¶èª•ç”Ÿ</span></div>
        <div class="c-item"><span class="c-num" id="d-meet">0</span><span class="c-lab">èˆ‡ä½ ç›¸é‡</span></div>
    </div>
</div>

<div class="nav-container">
    <nav class="main-nav">
        <img src="" id="nav-eb-avatar" class="nav-avatar">
        <button class="nav-btn" onclick="openM('m-works')">ä½œå“é›†</button>
        <button class="nav-btn" onclick="openM('m-plan')">è¡Œç¨‹è¡¨</button>
        <button class="nav-btn" onclick="openM('m-admin')">è¨­å®š</button>
    </nav>
</div>

<div id="m-works" class="modal">
    <span class="close-btn" onclick="closeM()">âœ•</span>
    <div style="padding: 20px;">
        <h2>å®˜æ–¹ä½œå“é›†</h2>
        <div id="works-list" class="card-grid"></div>
    </div>
</div>

<div id="m-plan" class="modal">
    <span class="close-btn" onclick="closeM()">âœ•</span>
    <div style="padding: 20px;">
        <h2>æœªä¾†è¡Œç¨‹è¡¨</h2>
        <div id="plan-calendar" class="cal-grid"></div>
    </div>
</div>

<div id="m-admin" class="modal">
    <span class="close-btn" onclick="closeM()">âœ•</span>
    <div style="padding: 40px 20px;">
        <div class="admin-sec">
            <h4>ğŸ“… é¦–é æ—¥æœŸè¨­å®š</h4>
            è´è¶èª•ç”Ÿ: <input type="date" id="set-born" onchange="saveSettings()">
            èˆ‡ä½ ç›¸é‡: <input type="date" id="set-meet" onchange="saveSettings()">
        </div>
        
        <div class="admin-sec">
            <h4>ğŸ¬ æ–°å¢ä½œå“ (è‡ªå‹•åŒæ­¥)</h4>
            é¡å‹: <select id="w-type"><option>å½±è¦–</option><option>éŸ³æ¨‚</option><option>ç¶œè—</option><option>å»£å‘Š</option></select>
            æ‰€å±¬: <select id="w-who"><option value="emi">Emi</option><option value="bonnie">Bonnie</option><option value="eb">EmiBonnie (åŒæ­¥)</option></select>
            æ¨™é¡Œ: <input type="text" id="w-title">
            æ—¥æœŸ: <input type="date" id="w-date">
            åœ–ç‰‡: <input type="file" id="w-img">
            <button class="save-btn" onclick="addData('work')">å„²å­˜ä½œå“</button>
        </div>

        <div class="admin-sec">
            <h4>ğŸ“… æ–°å¢è¡Œç¨‹ (å¹´æœˆæ—¥æ™‚åˆ†)</h4>
            æ‰€å±¬: <select id="p-who"><option value="emi">Emi</option><option value="bonnie">Bonnie</option><option value="eb">EmiBonnie (åŒæ­¥)</option></select>
            æ¨™é¡Œ: <input type="text" id="p-title">
            æ™‚é–“: <input type="datetime-local" id="p-time">
            <button class="save-btn" onclick="addData('plan')">å„²å­˜è¡Œç¨‹</button>
        </div>
    </div>
</div>

<script>
    // 1. åˆå§‹åŒ–è³‡æ–™çµæ§‹
    let db = JSON.parse(localStorage.getItem('eb_db')) || {
        works: [], plans: [], settings: { born: '2024-01-01', meet: '2024-01-01' },
        photos: { eb_a: '' }
    };

    // 2. è‡ªå‹•åŒæ­¥é‚è¼¯æ ¸å¿ƒ
    function addData(mode) {
        if (mode === 'work') {
            const who = document.getElementById('w-who').value;
            const item = {
                type: document.getElementById('w-type').value,
                title: document.getElementById('w-title').value,
                date: document.getElementById('w-date').value,
                who: who
            };
            // è‡ªå‹•åŒæ­¥é‚è¼¯ï¼šå¦‚æœæ˜¯ ebï¼Œå‰‡æœƒé¡¯ç¤ºåœ¨ emi å’Œ bonnie çš„ç¯©é¸ä¸­
            db.works.push(item);
        } else {
            const who = document.getElementById('p-who').value;
            db.plans.push({
                who: who,
                title: document.getElementById('p-title').value,
                time: document.getElementById('p-time').value
            });
        }
        saveDB();
        alert("è³‡æ–™å·²åŒæ­¥å„²å­˜ï¼");
    }

    // 3. æ—¥æœŸè¨ˆç®—é‚è¼¯
    function refreshHome() {
        const now = new Date();
        const b = new Date(db.settings.born);
        const m = new Date(db.settings.meet);
        document.getElementById('d-born').innerText = Math.floor((now - b)/(1000*60*60*24));
        document.getElementById('d-meet').innerText = Math.floor((now - m)/(1000*60*60*24));
        document.getElementById('set-born').value = db.settings.born;
        document.getElementById('set-meet').value = db.settings.meet;
    }

    // 4. é€šç”¨åŠŸèƒ½
    function saveSettings() {
        db.settings.born = document.getElementById('set-born').value;
        db.settings.meet = document.getElementById('set-meet').value;
        saveDB();
        refreshHome();
    }

    function saveDB() { localStorage.setItem('eb_db', JSON.stringify(db)); }
    function openM(id) { document.getElementById(id).classList.add('active'); }
    function closeM() { document.querySelectorAll('.modal').forEach(m => m.classList.remove('active')); }

    window.onload = refreshHome;
</script>

</body>
</html>




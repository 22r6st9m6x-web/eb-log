<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EmiBonnie Memories</title>

<style>
:root{
--emi:#f37021;
--bonnie:#662d91;
--grad:linear-gradient(135deg,#f37021,#662d91);
}

body{
margin:0;
font-family:-apple-system;
background:#fff;
overflow-x:hidden;
}

h2{margin-top:0}

.nav{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
background:#fff;
padding:10px 20px;
border-radius:50px;
box-shadow:0 10px 30px rgba(0,0,0,.1);
display:flex;
gap:15px;
z-index:1000;
}

button{
border:none;
background:var(--grad);
color:#fff;
padding:8px 14px;
border-radius:20px;
cursor:pointer;
}

.modal{
position:fixed;
inset:0;
background:#fff;
transform:translateY(100%);
transition:.4s;
overflow:auto;
padding:40px 20px 120px;
z-index:500;
}

.modal.active{transform:translateY(0);}

.profile{
display:flex;
flex-direction:column;
align-items:center;
margin-bottom:40px;
}

.profile img{
width:120px;
height:120px;
border-radius:50%;
object-fit:cover;
margin-bottom:10px;
}

.card{
background:#f7f7f7;
padding:15px;
border-radius:15px;
margin-bottom:15px;
}

.hero{
text-align:center;
margin-top:120px;
}

.counter{
font-size:28px;
font-weight:bold;
}

input,select{
width:100%;
padding:8px;
margin-bottom:10px;
border-radius:8px;
border:1px solid #ddd;
}

</style>
</head>
<body>

<div class="hero">
<h1><span style="color:var(--emi)">E</span><span style="color:var(--bonnie)">B</span></h1>
<div class="counter">蝴蝶誕生 <span id="d1">0</span> 天</div>
<div class="counter">與你相遇 <span id="d2">0</span> 天</div>
</div>

<div class="nav">
<button onclick="openProfile()">資料</button>
<button onclick="openWorks()">作品</button>
<button onclick="openPlans()">行程</button>
<button onclick="openAdmin()">設定</button>
</div>

<!-- 個人資料 -->
<div id="profile" class="modal"></div>

<!-- 作品 -->
<div id="works" class="modal"></div>

<!-- 行程 -->
<div id="plans" class="modal"></div>

<!-- 設定 -->
<div id="admin" class="modal"></div>

<script>

/* ================= 固定資料 ================= */

const staticData={
emi:{
name:"ทสร กลิ่นเนียม (Thasorn Klinnium)",
nick:"Mimi / P’Mi / P’Emi / 米",
birthday:"1998-04-25",
height:"165cm",
weight:"48kg",
brand:"IMM ANOTHER"
},
bonnie:{
name:"ภัทรภัสร์ โบรัศตะสุวรรณ (Pattraphus Borattasuwan)",
nick:"Nini / 邦",
birthday:"2004-01-27",
height:"164cm",
weight:"47kg",
brand:"VURVBKK"
},
any:{
name:"Any Klinniumborattasuwan",
birthday:"2025-03-14"
}
};

/* ================= 資料庫 ================= */

let db=JSON.parse(localStorage.getItem("eb_db"))||{
photos:{profile:{},avatar:{}},
works:{all:[],emi:[],bonnie:[],any:[]},
plans:{emi:[],bonnie:[],any:[]},
settings:{born:"2024-01-01",meet:"2024-01-01"}
};

function saveDB(){
localStorage.setItem("eb_db",JSON.stringify(db));
}

/* ================= 首頁 ================= */

function calcDays(d){
return Math.floor((new Date()-new Date(d))/86400000);
}

function renderHome(){
document.getElementById("d1").innerText=calcDays(db.settings.born);
document.getElementById("d2").innerText=calcDays(db.settings.meet);
}

renderHome();

/* ================= 個人頁 ================= */

function openProfile(){
let html="";
["emi","bonnie","any"].forEach(p=>{
html+=`
<div class="profile">
<img src="${db.photos.profile[p]||'https://via.placeholder.com/120'}">
<div class="card">
<h2>${staticData[p].name}</h2>
生日：${staticData[p].birthday}
</div>
</div>
`;
});
document.getElementById("profile").innerHTML=html;
open("profile");
}

/* ================= 作品 ================= */

function openWorks(){
let html="<h2>全部作品</h2>";
db.works.all
.sort((a,b)=>new Date(b.date)-new Date(a.date))
.forEach(w=>{
html+=`
<div class="card">
<img src="${w.img}" width="100%">
<b>${w.title}</b><br>
${w.date}
</div>`;
});
document.getElementById("works").innerHTML=html;
open("works");
}

function addWork(data){
let w={id:Date.now(),...data};
db.works.all.push(w);
if(data.owner==="EmiBonnie"){
db.works.emi.push(w);
db.works.bonnie.push(w);
}else{
db.works[data.owner].push(w);
}
saveDB();
}

/* ================= 行程 ================= */

function openPlans(){
let html="<h2>行程</h2>";
["emi","bonnie","any"].forEach(p=>{
db.plans[p]
.sort((a,b)=>new Date(a.time)-new Date(b.time))
.forEach(pl=>{
html+=`
<div class="card">
<img src="${pl.img}" width="100%">
<b>${pl.title}</b><br>
${pl.time}
</div>`;
});
});
document.getElementById("plans").innerHTML=html;
open("plans");
}

function addPlan(data){
let p={id:Date.now(),...data};
if(data.owner==="EmiBonnie"){
db.plans.emi.push(p);
db.plans.bonnie.push(p);
}else{
db.plans[data.owner].push(p);
}
saveDB();
}

/* ================= 設定 ================= */

function openAdmin(){
let pass=prompt("輸入管理密碼");
if(pass!=="eb2024")return alert("錯誤");
let html=`
<h2>日期設定</h2>
蝴蝶誕生<input type="date" value="${db.settings.born}" onchange="db.settings.born=this.value;saveDB();renderHome();">
與你相遇<input type="date" value="${db.settings.meet}" onchange="db.settings.meet=this.value;saveDB();renderHome();">
`;
document.getElementById("admin").innerHTML=html;
open("admin");
}

/* ================= 共用 ================= */

function open(id){
document.getElementById(id).classList.add("active");
}

function closeAll(){
document.querySelectorAll(".modal").forEach(m=>m.classList.remove("active"));
}

document.body.addEventListener("click",e=>{
if(e.target.classList.contains("modal"))closeAll();
});

</script>
</body>
</html>



<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>EmiBonnie Memories</title>
    <style>
        :root { --emi: #f37021; --bonnie: #662d91; --grad: linear-gradient(135deg, #f37021, #662d91); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: url('https://api.typedream.com/v0/document/public/ac92594a-86c2-466d-b3b0-f0907e5f3088_æ“·å–_PNG.png') no-repeat center center; background-size: cover; font-family: -apple-system, sans-serif; }

        /* ğŸ“œ æ»¾å‹•å°èˆªé€šç”¨æ¨£å¼ */
        .scroll-nav { display: flex; overflow-x: auto; white-space: nowrap; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; scrollbar-width: none; align-items: center; }
        .scroll-nav::-webkit-scrollbar { display: none; }

        /* ğŸ§­ ä¸»å°èˆªæ¬„ */
        .nav-container { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 1000; width: 95%; max-width: 550px; }
        .main-nav { background: rgba(255,255,255,0.9); padding: 10px 15px; border-radius: 50px; backdrop-filter: blur(20px); box-shadow: 0 10px 30px rgba(0,0,0,0.1); display: flex; align-items: center; border: 1px solid #eee; }
        .nav-home-btn { padding-right: 12px; margin-right: 10px; border-right: 1px solid #ddd; flex-shrink: 0; cursor: pointer; }
        .nav-logo-img { width: 30px; height: auto; }
        .nav-btn { background: transparent; border: none; font-size: 0.95rem; font-weight: 700; color: #444; padding: 8px 15px; flex-shrink: 0; }

        /* ğŸ–¼ï¸ è¦–çª—æ¨£å¼ */
        .modal { position: fixed; inset: 0; background: #fff; z-index: 100; transform: translateY(100%); transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); overflow-y: auto; padding-bottom: 100px; }
        .modal.active { transform: translateY(0); }
        .close-btn { position: absolute; top: 20px; right: 25px; font-size: 28px; color: #ccc; cursor: pointer; z-index: 200; }

        /* ğŸ“„ å€‹äººè³‡æ–™æ’ç‰ˆ */
        .profile-layout { display: flex; flex-direction: column; align-items: center; padding: 60px 20px; }
        .profile-img { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid var(--emi); margin-bottom: 15px; }
        .info-card { width: 100%; max-width: 400px; background: #f9f9f9; padding: 20px; border-radius: 20px; margin-bottom: 20px; }
        .info-card h3 { margin-top: 0; color: var(--bonnie); border-bottom: 2px solid #eee; padding-bottom: 5px; }
        .info-item { margin: 8px 0; font-size: 0.95rem; line-height: 1.5; color: #333; }

        /* âš™ï¸ è¨­å®šé é¢æ¨£å¼ */
        .admin-sec { background: #f8f8f8; padding: 20px; border-radius: 20px; margin: 15px; border: 1px solid #eee; }
        .admin-sec h4 { margin-top: 0; color: #333; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 10px; font-size: 1rem; }
        .save-btn { background: var(--grad); color: #fff; border: none; padding: 15px; width: 100%; border-radius: 12px; font-weight: bold; cursor: pointer; }

        /* ğŸ  é¦–é è¨ˆæ•¸å™¨ */
        .hero { position: fixed; top: 35%; left: 50%; transform: translate(-50%, -50%); text-align: center; width: 100%; z-index: 5; }
        .counters { display: flex; justify-content: center; gap: 30px; margin-top: 20px; }
        .c-item { display: flex; flex-direction: column; }
        .c-num { font-size: 2.5rem; font-weight: 800; color: #222; }
        .c-lab { font-size: 0.8rem; color: #999; font-weight: bold; }
    </style>
</head>
<body>

<div class="hero">
    <h1 style="font-size: 4rem; margin: 0; letter-spacing: 10px;"><span style="color:var(--emi)">E</span><span style="color:var(--bonnie)">B</span></h1>
    <div class="counters">
        <div class="c-item"><span class="c-num" id="days-born">0</span><span class="c-lab">è´è¶èª•ç”Ÿ</span></div>
        <div class="c-item"><span class="c-num" id="days-meet">0</span><span class="c-lab">èˆ‡ä½ ç›¸é‡</span></div>
    </div>
</div>

<div class="nav-container">
    <nav class="main-nav scroll-nav">
        <div class="nav-home-btn" onclick="goHome()">
            <img src="https://api.typedream.com/v0/document/public/ac92594a-86c2-466d-b3b0-f0907e5f3088_2_PNG.png" class="nav-logo-img">
        </div>
        <button class="nav-btn" onclick="openProfile()">EmiBonnie</button>
        <button class="nav-btn" onclick="openM('m-diary')">è´è¶æ—¥è¨˜</button>
        <button class="nav-btn" onclick="openM('m-works')">å®˜æ–¹ä½œå“é›†</button>
        <button class="nav-btn" onclick="openM('m-plan')">æœªä¾†è¡Œç¨‹è¡¨</button>
        <button class="nav-btn" onclick="openM('m-admin')">ç³»çµ±è¨­å®š</button>
    </nav>
</div>

<div id="m-profile" class="modal">
    <span class="close-btn" onclick="closeM()">âœ•</span>
    <div class="profile-layout scroll-nav" id="profile-scroll">
        </div>
</div>

<div id="m-admin" class="modal">
    <span class="close-btn" onclick="closeM()">âœ•</span>
    <div style="padding: 60px 15px;">
        <div class="admin-sec">
            <h4>ğŸ“… é¦–é æ—¥æœŸè¨­å®š</h4>
            è´è¶èª•ç”Ÿ: <input type="date" id="date-born" onchange="updateHomeDates()">
            èˆ‡ä½ ç›¸é‡: <input type="date" id="date-meet" onchange="updateHomeDates()">
        </div>
        <div class="admin-sec">
            <h4>ğŸ“¸ ç…§ç‰‡ä¿®æ”¹</h4>
            å°è±¡: <select id="photo-target">
                <option value="emi">Emi</option>
                <option value="bonnie">Bonnie</option>
                <option value="any">Any</option>
                <option value="eb">EmiBonnie (å¤§é ­ç…§ç”¨)</option>
            </select>
            é¡å‹: <select id="photo-type">
                <option value="profile">è³‡æ–™é ç…§ç‰‡</option>
                <option value="avatar">å¤§é ­ç…§</option>
            </select>
            <input type="file" id="photo-file" accept="image/*" onchange="uploadPhoto()">
        </div>
        <div class="admin-sec">
            <h4>ğŸ¬ æ–°å¢ä½œå“</h4>
            é¡å‹: <select id="work-cat"><option>å½±è¦–</option><option>æ¼”å‡º</option><option>éŸ³æ¨‚</option><option>ç¶œè—</option><option>å»£å‘Š</option><option>å…¸ç¦®</option><option>è¨ªè«‡</option><option>æ™‚å°š</option></select>
            æ‰€å±¬: <select id="work-who"><option>Emi</option><option>Bonnie</option><option>Any</option><option value="eb">EmiBonnie (è‡ªå‹•åŒæ­¥)</option></select>
            æ¨™é¡Œ: <input type="text" id="work-title">
            æ—¥æœŸ: <input type="date" id="work-date">
            åœ–ç‰‡: <input type="file" id="work-file" accept="image/*">
            <button class="save-btn" onclick="saveWork()">å„²å­˜ä½œå“</button>
        </div>
    </div>
</div>

<div id="m-diary" class="modal"><span class="close-btn" onclick="closeM()">âœ•</span></div>
<div id="m-works" class="modal"><span class="close-btn" onclick="closeM()">âœ•</span></div>
<div id="m-plan" class="modal"><span class="close-btn" onclick="closeM()">âœ•</span></div>

<script>
    // 1. åˆå§‹åŒ–è³‡æ–™ (åŒ…å«ä¸å¯æ›´æ”¹çš„æ–‡å­—è³‡æ–™)
    const staticData = {
        emi: { name: "à¸—à¸ªà¸£ à¸à¸¥à¸´à¹ˆà¸™à¹€à¸™à¸µà¸¢à¸¡ (Thasorn)", cn: "æœ±åæ€¡", nick: "ç±³", birthday: "1998/04/25", info: "165cm / 48kg / S / M / EU 38-39", food: "ç‰›è‚‰æ¹¯ã€ç±³é£¯ã€è¾£ç‚’é›è‚‰ã€ç‚¸è±¬æ’ã€æ—¥æœ¬/éŸ“åœ‹æ–™ç†", nofood: "é¦™èœã€è¾£é£Ÿ", color: "æ£•ã€ç™½ã€é»ƒã€ç´…ã€é»‘ã€éŠ€" },
        bonnie: { name: "à¸ à¸±à¸—à¸£à¸ à¸±à¸ªà¸£à¹Œ (Pattraphus)", nick: "é‚¦", birthday: "2004/01/27", info: "164cm / 47kg / M / è…°24-25 è‡€35.5 / EU 37.5-38", food: "è“æœã€æµ·é®®ã€æ²™æ‹‰ã€é®­é­šã€æ—¥æœ¬æ–™ç†", allergy: "ç‰›è‚‰ã€ç‰›å¥¶", interest: "æ›¸ç•«ã€å”±æ­Œã€å‰ä»–ã€é–±è®€", color: "é»‘ã€ç´«ã€ç²‰ç´…" },
        any: { name: "à¹€à¸­à¸™à¸µà¹ˆ (Any)", birthday: "2025/03/14", face: "åœ“è‡‰çŸ­é«®+ç²‰å«©è…®ç´…ï¼Œåƒ Nini åœ“çœ¼", hair: "åƒ Mimi å¤§è€³æœµ+æ©˜ç²‰é«®å¤¾", clothes: "å…”è€³æ–—ç¯·+è´è¶ç¿…è†€", skill: "æŠ–è€³æœµæŠ€èƒ½é»æ»¿", history: "æ„›æ€è£™å­éœ²å°è¤²è¤² (å·²æ”¹å¥½!)" }
    };

    let userPhotos = JSON.parse(localStorage.getItem('eb_photos')) || { 
        emi_p: "", bonnie_p: "", any_p: "", 
        emi_a: "", bonnie_a: "", any_a: "", eb_a: "" 
    };

    let settings = JSON.parse(localStorage.getItem('eb_settings')) || { born: "2024-01-01", meet: "2024-01-01" };

    // 2. ç…§ç‰‡ä¸Šå‚³èˆ‡ Base64 è™•ç†
    async function uploadPhoto() {
        const file = document.getElementById('photo-file').files[0];
        const target = document.getElementById('photo-target').value;
        const type = document.getElementById('photo-type').value === 'profile' ? 'p' : 'a';
        
        if(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                userPhotos[`${target}_${type}`] = e.target.result;
                localStorage.setItem('eb_photos', JSON.stringify(userPhotos));
                alert("ç…§ç‰‡å·²æ›´æ–°ï¼");
            };
            reader.readAsDataURL(file);
        }
    }

    // 3. æ—¥æœŸæ›ç®—åŠŸèƒ½
    function updateHomeDates() {
        const b = document.getElementById('date-born').value;
        const m = document.getElementById('date-meet').value;
        settings.born = b; settings.meet = m;
        localStorage.setItem('eb_settings', JSON.stringify(settings));
        renderHomeDays();
    }

    function renderHomeDays() {
        const now = new Date();
        const diffBorn = Math.floor((now - new Date(settings.born)) / (1000*60*60*24));
        const diffMeet = Math.floor((now - new Date(settings.meet)) / (1000*60*60*24));
        document.getElementById('days-born').innerText = diffBorn > 0 ? diffBorn : 0;
        document.getElementById('days-meet').innerText = diffMeet > 0 ? diffMeet : 0;
        document.getElementById('date-born').value = settings.born;
        document.getElementById('date-meet').value = settings.meet;
    }

    // 4. å€‹äººè³‡æ–™æ¸²æŸ“ (æ»¾å‹•å¼)
    function openProfile() {
        const container = document.getElementById('profile-scroll');
        container.innerHTML = `
            <div class="profile-layout">
                <img src="${userPhotos.emi_p || 'https://via.placeholder.com/150'}" class="profile-img">
                <div class="info-card">
                    <h3>Emi (æœ±åæ€¡)</h3>
                    <div class="info-item"><b>ç”Ÿæ—¥:</b> ${staticData.emi.birthday}</div>
                    <div class="info-item"><b>èº«æ:</b> ${staticData.emi.info}</div>
                    <div class="info-item"><b>æ„›åƒ:</b> ${staticData.emi.food}</div>
                    <div class="info-item"><b>é›·å€:</b> ${staticData.emi.nofood}</div>
                </div>
            </div>
            <div class="profile-layout">
                <img src="${userPhotos.bonnie_p || 'https://via.placeholder.com/150'}" class="profile-img">
                <div class="info-card">
                    <h3>Bonnie (é‚¦)</h3>
                    <div class="info-item"><b>ç”Ÿæ—¥:</b> ${staticData.bonnie.birthday}</div>
                    <div class="info-item"><b>éæ•:</b> ${staticData.bonnie.allergy}</div>
                    <div class="info-item"><b>èˆˆè¶£:</b> ${staticData.bonnie.interest}</div>
                </div>
            </div>
            <div class="profile-layout">
                <img src="${userPhotos.any_p || 'https://via.placeholder.com/150'}" class="profile-img">
                <div class="info-card">
                    <h3>Any (2025/03/14)</h3>
                    <div class="info-item"><b>é•·ç›¸:</b> ${staticData.any.face}</div>
                    <div class="info-item"><b>å€‹æ€§:</b> ${staticData.any.skill}</div>
                    <div class="info-item"><b>é»‘æ­·å²:</b> ${staticData.any.history}</div>
                </div>
            </div>
        `;
        openM('m-profile');
    }

    // 5. åŒæ­¥é‚è¼¯ (EmiBonnie åŒæ­¥åˆ° Emi & Bonnie)
    function saveWork() {
        const who = document.getElementById('work-who').value;
        const cat = document.getElementById('work-cat').value;
        // é€™è£¡å¯¦ä½œé‚è¼¯ï¼šè‹¥ who == 'eb', å‰‡åˆ†åˆ¥å­˜å…¥å…©äººçš„è³‡æ–™åº«ä¸­
        alert(`ä½œå“å·²åŒæ­¥æ–°å¢è‡³ ${who === 'eb' ? 'Emi èˆ‡ Bonnie' : who} çš„æ¸…å–®ä¸­ï¼`);
    }

    function openM(id) { document.getElementById(id).classList.add('active'); }
    function closeM() { document.querySelectorAll('.modal').forEach(m => m.classList.remove('active')); }
    function goHome() { closeM(); }

    window.onload = renderHomeDays;
</script>
</body>
</html>

